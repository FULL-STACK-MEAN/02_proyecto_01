<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventas</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <header>
        <img src="img/logo.svg" alt="logo Imperial Real State">
        <nav>
            <a href="#">Inicio</a>
            <a class="active" href="#">Venta</a>
            <a href="#">Alquiler</a>
            <a href="#">Contacto</a>
        </nav>
    </header>
    <div id="burger">
        <div class="bar top"></div>
        <div class="bar center"></div>
        <div class="bar bottom"></div>
    </div>
    <aside>
        <nav>
            <a href="#">Inicio</a>
            <hr>
            <a class="active" href="#">Venta</a>
            <hr>
            <a href="#">Alquiler</a>
            <hr>
            <a href="#">Contacto</a>
        </nav>
    </aside>
    <div class="row property">
        <div class="col-50">
            <h1>Villa en Los Altos de Marbella (Urb. Los Pinos)</h1>
            <p>
                <img src="img/blueprint.svg" alt="">
                950 m2 habitables
            </p>
            <p>
                <img src="img/bed.svg" alt="">
                7 dormitorios
            </p>
            <p>
                <img src="img/bath.svg" alt="">
                9 baños
            </p>
            <p>
                <img src="img/tree.svg" alt="">
                Jardín de 2.500 m<sup>2</sup>
            </p>
            <p>
                <img src="img/money.svg" alt="">
                6.000.000 €
            </p>
            <p>
                <img src="img/contract.svg" alt="">
                Entrega inmediata
            </p>
            <div class="flex j-end">
                <button onclick="openModal()">Ver imágenes</button>
            </div>
        </div>
        <div class="col-50"></div>
    </div>
    <div class="row">
        <div class="col-50">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corporis, eos!</p>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aut maiores quasi facere quisquam, in ducimus!</p>
        </div>
        <div class="col-50">
            <img src="img/property2.jpg" alt="">
        </div>
    </div>
    <div class="row">
        <div class="col-50">
            <img src="img/property3.jpg" alt="">
        </div>
        <div class="col-50">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corporis, eos!</p>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aut maiores quasi facere quisquam, in ducimus!</p>
        </div>
    </div>
    <footer>
        <div class="col-33">
            <p>Imperial Real State</p>
            <p class="flex a-center">
                <img class="m-r-small" src="img/map.svg" alt="">
                Paseo de la Constitución, 12
            </p>
            <p>29600 Marbella</p>
            <p class="flex a-center">
                <img class="m-r-small" src="img/phone.svg" alt="">
                +34951000000
            </p>
            <p class="flex a-center">
                <img class="m-r-small" src="img/mail.svg" alt="">
                info@imperial.com
            </p>
        </div>
        <div class="col-33">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3207.723460153215!2d-4.970195084493958!3d36.488394792888215!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd7329f26ece3739%3A0x371fe6f2c976ef64!2sCalle%20R%C3%ADo%20Danubio%2C%2029660%20Marbella%2C%20M%C3%A1laga!5e0!3m2!1ses!2ses!4v1620657088728!5m2!1ses!2ses" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
        <div class="col-33">
            <div class="flex j-around">
                <img class="rrss" src="img/facebook.svg" alt="">
                <img class="rrss" src="img/instagram.svg" alt="">
                <img class="rrss" src="img/twitter.svg" alt="">
                <img class="rrss" src="img/whatsapp.svg" alt="">
            </div>
            <div class="flex j-around m-t">
                <a href="#">Aviso legal</a>
                <a href="#">Política de cookies</a>
            </div>
            <div class="flex j-center m-t">
                <p>&copy; 2021 All right reserved Imperial Real State</p>
            </div>
        </div>
    </footer>
    <div class="overlay"></div>
    <div class="carousel">
        <div class="slide">
            <img src="img/property1.jpg" alt="">
        </div>
        <div class="slide">
            <img src="img/property2.jpg" alt="">
        </div>
        <div class="slide">
            <img src="img/property3.jpg" alt="">
        </div>
        <div class="slide">
            <img src="img/property4.jpg" alt="">
        </div>
        <div class="slide">
            <img src="img/property5.jpg" alt="">
        </div>
        <div class="slide">
            <img src="img/property6.jpg" alt="">
        </div>
        <div class="btn x-modal" onclick="closeModal()">
            <img src="img/x.svg" alt="">
        </div>
        <div class="btn left-arrow" onclick="prevSlide()">
            <img src="img/left.svg" alt="">
        </div>
        <div class="btn right-arrow" onclick="nextSlide()">
            <img src="img/right.svg" alt="">
        </div>
    </div>
    <script>
        let overlay = document.querySelectorAll('.overlay')[0];
        let carousel = document.querySelectorAll('.carousel')[0];
        let slides = document.querySelectorAll('.slide');
        let images = document.querySelectorAll('.slide img');
        let leftArrow = document.querySelectorAll('.left-arrow')[0];
        let rightArrow = document.querySelectorAll('.right-arrow')[0];
        let counter = 0;

        function loadSlides() {
            carousel.style.height = '90vh';

            for (i=0; i < images.length; i++) {
                if (images[i].offsetHeight < carousel.offsetHeight) {
                    carousel.style.height = images[i].offsetHeight + 'px';
                }
            }
    
            for (i=0; i < slides.length; i++) {
                slides[i].style.left = carousel.offsetWidth * -i + 'px';
            }
            setTimeout(function() {
                for (i=0; i < slides.length; i++) {
                    slides[i].classList.add('fadein');
                }
            }, 500)
        }

        function openModal() {
            overlay.style.display = 'block';
            carousel.style.display = 'block';
            loadSlides();
        }

        function prevSlide() {
            updateArrowsState(-1);
            for(i=0; i < slides.length; i++) {
                slides[i].style.left = slides[i].offsetLeft - carousel.offsetWidth + 'px';
            }
        }

        function nextSlide() {
            updateArrowsState(1);
            for(i=0; i < slides.length; i++) {
                slides[i].style.left = slides[i].offsetLeft + carousel.offsetWidth + 'px';
            }
        }

        function updateArrowsState(e) {
            counter += e;
            if (counter === 0) {
                leftArrow.style.display = 'none';
                rightArrow.style.display = 'flex';
            } else if (counter === slides.length - 1) {
                leftArrow.style.display = 'flex';
                rightArrow.style.display = 'none';
            } else {
                leftArrow.style.display = 'flex';
                rightArrow.style.display = 'flex';
            }
            leftArrow.style.pointerEvents = 'none';
            rightArrow.style.pointerEvents = 'none';
            setTimeout(function() {
                leftArrow.style.pointerEvents = 'auto';
                rightArrow.style.pointerEvents = 'auto';
            }, 1000)
        }

        function closeModal() {
            overlay.style.display = 'none';
            carousel.style.display = 'none';
            counter = 0;
            leftArrow.style.display = 'none';
            rightArrow.style.display = 'flex';
            for (i=0; i < slides.length; i++) {
                slides[i].classList.remove('fadein');
            }
        }

        window.onresize = closeModal;

    </script>
</body>
</html>